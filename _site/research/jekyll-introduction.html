
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>利用Jekyll搭建个人博客</title>
    <meta name="description" content="Jekyll是一个静态网站生成器，用ruby编写而成，结合了markdown、Liquid等技术，简化了静态网站的构建过程，配合disqus等技术，可以方便的生成具有简单动态功能的网站。
">
    <meta name="author" content="windcorner">
    <meta name="keywords" content="风之一角,windcorner,利用Jekyll搭建个人博客,research,jekyll">
    <meta property="wb:webmaster" content="45f4c044418008e7" />
    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!-- Le styles -->
    <link href="/assets/themes/twitter2/css/bootstrap.min.css" rel="stylesheet">
    <link href="/assets/themes/twitter2/css/custom.css?v=0.3" rel="stylesheet" type="text/css" media="all">
    <link href="/assets/themes/twitter2/css/syntax.css?body=1" rel="stylesheet" type="text/css" media="all">
    <link rel="shortcut icon" href="/assets/images/favicon.ico" />
	<script src="/assets/function.js"></script>
  </head>

  <body>
    <div id="navbar" class="navbar navbar-fixed-top" style="padding-left: 0; padding-right: 0;">
      <div class="navbar-inner" style="background:#2c2c2c">
        <div class="container-fluid" style="margin-left:8%; margin-right:5%; overflow:hidden; padding-left: 0; padding-right: 0;">
          <a class="brand" href="/">风之一角</a>
          <ul id="left-nav" class="nav" style="font-weight: 250;">
            <li class="divider-vertical" id="left-divider"></li>
            
            


  
    
      
      <li><a href="/study/index.html">学习历程</a></li>
      
    
  
    
      
      <li><a href="/research/index.html">技术研究</a></li>
      
    
  
    
      
      <li><a href="/life/index.html">生活杂记</a></li>
      
    
  
    
      
      <li><a href="/tags.html">标签</a></li>
      
    
  
    
      
      <li><a href="/archive.html">归档</a></li>
      
    
  



          </ul>
          
          <ul class="nav pull-right nav-right">
            <li class="divider-vertical" id="right-divider"></li>
            <li><a><span id=localtime class="label" style="background:#FCF8E3; font-size: 11px; font-weight: normal;"></span><script type="text/javascript">tick();</script></a></li>
          </ul>
        </div>
      </div>
    </div>

    <div id="main" class="container-fluid" style="position: relative; padding-left: 8%; padding-right: 8%;">
      
<div class="row-fluid">
  <div id="post-span" class="span10" style="margin-left: 10%;">
    <div class="content post">     
      <h1 class="title">利用Jekyll搭建个人博客</h1>
      Jekyll是一个静态网站生成器，用ruby编写而成，结合了markdown、Liquid等技术，简化了静态网站的构建过程，配合disqus等技术，可以方便的生成具有简单动态功能的网站。

      
<h2 id="section">准备工作</h2>

<ol>
  <li>安装<a href="http://rubyinstaller.org/downloads/">RubyInstaller</a></li>
  <li>安装<a href="http://rubyinstaller.org/downloads/">DevKit</a></li>
  <li>安装Jekyll： <code>$ gem install jekyll</code></li>
  <li>安装Python（推荐Python 2.7.2）</li>
  <li>安装Python <a href="http://pypi.python.org/pypi/setuptools">setuptools</a>，找对应的exe文件下载安装。</li>
  <li>添加 C:\Python27\Scripts（假设你的Python安装在C盘根目录下）到你的path</li>
  <li>安装pygments: <code>$ easy_install pygments</code></li>
  <li>安装windows下的Git——<a href="http://msysgit.github.com/">msysGit</a></li>
  <li>在Github上创建一个账户。Github会引导你如何进行简单的设置，如果你没用过Git，没关系，只管照做。</li>
</ol>

<h2 id="jekyll-blog">3分钟搭建Jekyll Blog</h2>

<form action="#" id="generate_code" class="alert alert-block alert-warn form-inline" style="text-align:center; vertical-align:middle">
  <label>GitHub账号:</label> <input type="text" id="github_username" /> <button class="btn btn-success" onclick="Pc.init()">个性化代码</button>
</form>

<h3 id="section-1">1 - 创建一个新的个版本库</h3>

<p>登陆你的<a href="https://github.com/">Github账户</a>，创建一个新的版本库，命名为<strong id="repo_name">USERNAME.github.com</strong></p>

<h3 id="jekylljekyll-bootstrap">2 - 安装Jekyll引导程序（Jekyll-Bootstrap）</h3>
<h3 id="2__install_jekyllbootstrap" style="display:none">2 - Install Jekyll-Bootstrap</h3>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>git clone https://github.com/plusjade/jekyll-bootstrap.git USERNAME.github.com
<span class="nv">$ </span><span class="nb">cd </span>USERNAME.github.com
<span class="nv">$ </span>git remote <span class="nb">set</span>-url origin git@github.com:USERNAME/USERNAME.github.com.git
<span class="nv">$ </span>git push origin master</code></pre></div>

<h3 id="enjoy">3 - enjoy</h3>

<p>两分钟后你的Blog神奇的出现在 
<a href="http://USERNAME.github.com" id="blog_link">http://USERNAME.github.com</a></p>

<h3 id="githubblog">*已经在GitHub上创建的Blog?</h3>

<p>如果你安装了Jekyll，你可以在本地预览你的Blog:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>git clone https://github.com/plusjade/jekyll-bootstrap.git
<span class="nv">$ </span><span class="nb">cd </span>jekyll-bootstrap
<span class="nv">$ </span>jekyll --server</code></pre></div>

<p>在浏览器预览<a href="http://localhost:4000">http://localhost:4000</a>.</p>

<p><a href="http://jekyllbootstrap.com/lessons/jekyll-introduction.html">更多介绍</a></p>

<h2 id="section-2">快速开始</h2>

<h3 id="jekyll">本地运行Jekyll</h3>

<p>假设你已经安装好了jekyll-bootstrap，以及其他一些基本运行环境和工具，首先启动你本地的WEBrick服务器（Ruby自带的）：</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span><span class="nb">cd </span>USERNAME.github.com 
<span class="nv">$ </span>jekyll --server
<span class="c"># 别忘了把USERNAME换成你的GitHub用户名。</span></code></pre></div>

<p>你的Blog在这预览: <a href="http://localhost:4000/">http://localhost:4000/</a>。</p>

<h3 id="section-3">创建第一篇博文</h3>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>rake post <span class="nv">title</span><span class="o">=</span><span class="s2">&quot;Hello World&quot;</span></code></pre></div>

<p>默认情况下rake命令会在你的_posts目录下创建一个名为[年-月-日-posttitle.md]的文件，例如2012-05-04-Hello-World.md，名称中的空格会转换成“-”，时间为当前系统时间。当然这些都是可配置的。</p>

<p>rake命令默认不会覆盖掉相同名称的文件。</p>

<h3 id="section-4">创建第一个页面</h3>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># 根目录下创建页面</span>
<span class="nv">$ </span>rake page <span class="nv">name</span><span class="o">=</span><span class="s2">&quot;about.md&quot;</span>

<span class="c"># 自定义目录下创建页面</span>
<span class="nv">$ </span>rake page <span class="nv">name</span><span class="o">=</span><span class="s2">&quot;pages/about.md&quot;</span>

<span class="c"># 创建类似./pages/about/index.html目录结构的页面</span>
<span class="nv">$ </span>rake page <span class="nv">name</span><span class="o">=</span><span class="s2">&quot;pages/about&quot;</span></code></pre></div>

<h3 id="section-5">发布</h3>

<p>完成一篇博文或者做一些修改之后可以用简单的git命令提交到远程的Github版本库。同时Github可以将md文件解析成html文件，通过USERNAME.github.com就可以访问刚才提交的博文。</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>git add .
<span class="nv">$ </span>git commit -m <span class="s2">&quot;Add new content&quot;</span>
<span class="nv">$ </span>git push origin master</code></pre></div>

<p>至此你就可以写自己的blog like a hacker。</p>

<p>当然你还可以运用一些预置的<a href="http://themes.jekyllbootstrap.com/">主题</a>，做一些自定义的配置，以及自己定义主题增加模板配置文件、增加Blog挂件、加入<a href="http://www.google.com/analytics/">Google Analytics</a>、<a href="http://disqus.com/">Disqus</a>等等，同样可以将一个静态网站做的栩栩如生。</p>

<p>另外网站默认是托管在Github服务器（实际上是RackSpace的云服务器）上的，你还可以考虑免费的Heroku，至于GAE、EC2（免费一年），显然有些大材小用了。</p>

<h2 id="section-6">遇到的问题</h2>

<h3 id="post">1. 本地post中出现中文不能正常编译</h3>

<p>由于windows下的git控制台MinGW默认不支持中文编码，需要将其设置为UTF-8，有两种解决方案：</p>

<p><strong>临时</strong>：控制台输入以下语句</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span><span class="nb">export </span><span class="nv">LC_ALL</span><span class="o">=</span>en_US.UTF-8
<span class="nv">$ </span><span class="nb">export </span><span class="nv">LANG</span><span class="o">=</span>en_US.UTF-8</code></pre></div>

<p><strong>永久</strong>：添加两个用户自定义的环境变量，LC_ALL=en_US.UTF-8 和 LANG=en_US.UTF-8（你想的没错，就是修改windows环境变量）</p>

<p>另外Jekyll默认的Markdown引擎markup对中文的解析不是很好，建议换成rdiscount。在_config.yml文件中pygments: true上一行添加markdown: rdiscount。在此之前你必须首先安装Rdiscount。</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>gem install rdiscount</code></pre></div>

<h3 id="liquid-error-no-such-file-or-directory---pygmentize">2. Liquid error: No such file or directory - pygmentize</h3>

<p>没有安装Pygments的缘故，如果你安装了python，只需要easy install。</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>easy_install Pygments</code></pre></div>

<h3 id="liquid-error-bad-file-descriptor">3. Liquid error: bad file descriptor</h3>

<p>我的电脑上同时装了python2.7和python3.2，我想是这个原因。需要给albino.rb文件打个补丁，假设你的Ruby安装在D:\Program\，并且你已经把<a href="https://gist.github.com/2592525">albino-windows-refactor.patch补丁文件</a>copy到了下边的目录：</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span><span class="nb">cd </span>D:<span class="se">\P</span>rogram<span class="se">\R</span>uby193<span class="se">\l</span>ib<span class="se">\r</span>uby<span class="se">\g</span>ems<span class="se">\1</span>.9.1<span class="se">\g</span>ems<span class="se">\a</span>lbino-1.3.3<span class="se">\l</span>ib
<span class="nv">$ </span>patch &lt; albino-windows-refactor.patch</code></pre></div>

<h3 id="section-7">4. 侧边栏二级目录的链接不起作用</h3>

<p>这个问题花了不少时间，最终还是未能找到问题所在，无奈，只有自己动手丰衣足食，自己写js搞定。</p>

<p>首先看一下源码，在assets\app.js文件中的Toc中看可以看到：</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">node</span><span class="p">.</span><span class="nx">children</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
    <span class="nx">cache</span> <span class="o">+=</span> <span class="s1">&#39;&lt;li class=&quot;sub&quot;&gt;&lt;a href=&quot;#&#39;</span><span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">id</span> <span class="o">+</span> <span class="s1">&#39;&quot;&gt;&#39;</span><span class="o">+</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">text</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39;&lt;/a&gt;&lt;/li&gt;&#39;</span><span class="p">;</span>
  <span class="p">})</span></code></pre></div>

<p>显然他在这为链接设置了href，但是调用了h2对象（也就是侧边栏目录的二级菜单）的id属性，而用Firebug查看最终解析成的html文件，发现&lt;h2&gt;的id是不存在的，于是自然想到这在之前先为h2设置唯一的id属性。这个用jQuery很容易就能实现：</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;h2&quot;</span><span class="p">).</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span><span class="s2">&quot;_&quot;</span><span class="o">+</span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">text</span><span class="p">());});</span></code></pre></div>

<h3 id="couldt-parse-yaml-at-line-6-column-6-psychsyntaxerror">5. 类似于could’t parse YAML at line 6 column 6 (Psych::SyntaxError)的问题</h3>

<p>YAM了貌似对空格比较敏感，需要一个空格的时候就不要敲多个空格，同时注意你的Tab缩进，_config.yml中的属性都是key: value形式的，别忘了：后边有个空格。</p>

<p>另外post文件头中的属性配置也要注意：</p>
<pre><code>
---
layout: post
title : post_title
categories : category_name
description: |
  This is a decription.
---
</code></pre>
<p>description第二行开头我敲了一个Tab（四个字符宽度）就出错了，一些细节，注意一下就好了。</p>

<h2 id="section-8">域名绑定</h2>

<p>Github会为你分配一个类似于USERNAME.github.com的二级域名，如果你自己有一个顶级域名，你可以将它与Github提供的一个共有IP(204.232.175.78)绑定，这个在<a href="http://help.github.com/pages/">Github Pages</a>上有详细介绍，在你的网站根目录下增加一个CNAME文件，里边写你自己的域名，再给你的域名增加一条A记录，稍等片刻之后就可以用你的域名访问了。</p>

<p>当然域名是需要花钱的，如果你舍不得花银子，免费的午餐还是会有的，你可以免费申请一个（当然也可以是多个）.tk的域名。<a href="http://www.dot.tk/zh/index.html">DotTK</a>提供yourname.tk的免费顶级域名。.tk是南太平洋岛国托克劳的国家域名，免费注册一个帐户可以任意申请.tk域名，支持域名转发（可隐藏原URL）、电邮转发、A记录解析、CNAME别名记录、MX邮件记录、设置DNS服务器等服务。当然免费的总是会有一些限制条件喽。</p>

<ul>
  <li>如果你注册的域名在90天内访问量少于25个，你的域名将被删除！</li>
  <li>如果你开通的电邮转发在90天内收到的邮件少于10封，你的电邮转发服务将被停止！</li>
</ul>

<p>另外很多看起来不错的域名不是免费的，要交费才能注册使用！比如说cn.tk。</p>

<p>注册流程很简单，有中文版的，几十秒钟你的免费顶级域名就到手了，是不是很happy！</p>

    
    </div>
    <hr>
    


  <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_developer = 1;
    var disqus_shortname = 'windcorner'; // required: replace example with your forum shortname
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>




  </div>
</div>


      <hr>
      
    </div> <!-- /container -->

    <footer class="footer">
      <p id="footer-first-child">Lovingly authored by windcorner in 2012 with help 
          <br>from <a href="http://jekyllbootstrap.com" target="_blank" title="The Definitive Jekyll Blogging Framework">Jekyll Bootstrap</a>,<a href="http://twitter.github.com/bootstrap/" target="_blank">Twitter Bootstrap</a>, and countless humans.
        </p>
        <p>&copy; 2012 windcorner, Powered by Github</p>
        <!--<p><a href="https://mixpanel.com/f/partner"><img src="https://mixpanel.com/site_media/images/partner/badge_light.png" alt="Real Time Web Analytics" /></a></p>-->
    </footer>
    
    

<div id="sidebar" class="sidebar">
  <h4>学习笔记</h4>
  <ul>
    
    


  
    
      
      <li class="active"><a href="/research/jekyll-introduction.html" class="active">利用Jekyll搭建个人博客</a></li>
      
    
  



  </ul>

</div>

    <!-- <a id="forkme" style="display:none" href="http://github.com/mceiba/mceiba.github.com"><img style="position: absolute; top: 40px; right: 0; border: 0;" src="/assets/images/forkme.png" alt="Fork me on GitHub"></a> -->
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="/assets/themes/twitter2/js/jquery.min.js"><\/script>')</script>
    <script src="/assets/app.js?v=0.1"></script>
    <script>
      $(function(){
        //forkme.init(); 
        var delta = $(window).height() - $(document.body).height() -50;
        if (delta>0) {
          $(".footer").css("margin-top", delta);
          // $(".footer").animate({
          //   "margin-top": delta+"px"
          // }, "fast");
        }
      
		  var i=1;
  		$("h2").each(function(){$(this).attr("id",(i++)+"_"+$(this).text());});
  		//$("h2").attr("id", function(){ return "h2_"(i++)+"_"+this.title });
          Toc.init('#sidebar', '#main');
        
  	  })
    </script>
    
    <!---->
  </body>
</html>


